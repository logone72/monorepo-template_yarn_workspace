#!/bin/bash

# μ¤λ¥κ°€ λ°μƒν•λ©΄ μ¦‰μ‹ μΆ…λ£
set -e

echo "β•”β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•—"
echo "β•‘                                                                           β•‘"
echo "β•‘   β–β–β–β–β–β–β–β•—β–β–β–β–β–β–β•—  β–β–β–β–β–β–β•— β–β–β–β•—   β–β–β•—β–β–β–β–β–β–β–β–β•—    β–β–β•—   β–β–β•—β–β–β–β–β–β–β–β–β•—β–β–β•—   β•‘"
echo "β•‘   β–β–β•”β•β•β•β•β•β–β–β•”β•β•β–β–β•—β–β–β•”β•β•β•β–β–β•—β–β–β–β–β•—  β–β–β•‘β•β•β•β–β–β•”β•β•β•    β–β–β•‘   β–β–β•‘β•β•β•β–β–β•”β•β•β•β–β–β•‘   β•‘"
echo "β•‘   β–β–β–β–β–β•—  β–β–β–β–β–β–β•”β•β–β–β•‘   β–β–β•‘β–β–β•”β–β–β•— β–β–β•‘   β–β–β•‘       β–β–β•‘   β–β–β•‘   β–β–β•‘   β–β–β•‘   β•‘"
echo "β•‘   β–β–β•”β•β•β•  β–β–β•”β•β•β–β–β•—β–β–β•‘   β–β–β•‘β–β–β•‘β•β–β–β•—β–β–β•‘   β–β–β•‘       β–β–β•‘   β–β–β•‘   β–β–β•‘   β–β–β•‘   β•‘"
echo "β•‘   β–β–β•‘     β–β–β•‘  β–β–β•‘β•β–β–β–β–β–β–β•”β•β–β–β•‘ β•β–β–β–β–β•‘   β–β–β•‘       β•β–β–β–β–β–β–β•”β•   β–β–β•‘   β–β–β•‘   β•‘"
echo "β•‘   β•β•β•     β•β•β•  β•β•β• β•β•β•β•β•β•β• β•β•β•  β•β•β•β•β•   β•β•β•        β•β•β•β•β•β•β•    β•β•β•   β•β•β•   β•‘"
echo "β•‘                                                                           β•‘"
echo "β•‘                     π€ μ ν‹Έ λΉλ“λ¥Ό μ‹μ‘ν•©λ‹λ‹¤... π€                       β•‘"
echo "β•‘                                                                           β•‘"
echo "β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•"

print_step() {
  echo "β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”"
  echo "β”‚ π”” $1"
  echo "β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”"
}

print_step "π§Ή μ΄μ „ λΉλ“ νμΌμ„ μ •λ¦¬ν•©λ‹λ‹¤..."
yarn run clean

print_step "π“ νƒ€μ…μ¤ν¬λ¦½νΈ μ„ μ–Έ νμΌμ„ μƒμ„±ν•©λ‹λ‹¤..."
yarn run build:tsc

print_step "β¨ νƒ€μ… μ„ μ–Έ νμΌμ„ μ΄μκ² ν•©λ‹λ‹¤..."
prettier dist/@types --write

print_step "π”¨ μλ°”μ¤ν¬λ¦½νΈ νμΌμ„ λΉλ“ν•©λ‹λ‹¤..."
yarn run build:js


echo
echo "β•”β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•—"
echo "β•‘                                                                           β•‘"
echo "β•‘                     β¨ μ ν‹Έ λΉλ“κ°€ μ™„λ£λμ—μµλ‹λ‹¤! β¨                     β•‘"
echo "β•‘                                                                           β•‘"
echo "β•‘                    λ¨λ“  νμΌμ΄ μ„±κ³µμ μΌλ΅ λΉλ“λμ—μµλ‹λ‹¤                  β•‘"
echo "β•‘                                                                           β•‘"
echo "β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•"